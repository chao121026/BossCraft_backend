<template id="unified_dashboard" name="Unified E-Commerce Dashboard">
  <t t-call="website.layout">
    <div id="unified-dashboard" class="container-fluid pt-4">
      <h1>üåê Hello, <t t-esc="user_name"/> ‚Äî Your Unified E-Commerce Dashboard</h1>
      <p class="text-muted">One system for sourcing, store, fulfillment, and profit.</p>

      <!-- Ecosystem Health -->
      <div class="row mt-4">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">üì¶ Sourcing</h5>
                <span class="badge bg-success">Healthy</span>
              </div>
              <p class="text-muted mt-2">
                <t t-esc="sourcing.out_of_stock"/> of <t t-esc="sourcing.total_products"/> products need restock
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">üè™ Store</h5>
                <span class="badge bg-success">Healthy</span>
              </div>
              <p class="text-muted mt-2">
                <t t-esc="store.conversion_rate"/>% conversion rate (simulated)
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">üöö Fulfillment</h5>
                <span class="badge bg-warning">Warning</span>
              </div>
              <p class="text-muted mt-2">
                <t t-esc="fulfillment.pending"/> orders pending fulfillment
              </p>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="mb-0">üí∞ Profit</h5>
                <span class="badge bg-success">Healthy</span>
              </div>
              <p class="text-muted mt-2">
                <t t-esc="'${:,.0f}'.format(profit.total)"/> total profit
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <!-- Sourcing Health -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h5>üì¶ Sourcing Health</h5>
            </div>
            <div class="card-body">
              <div class="progress mb-3" style="height: 20px;">
                <div class="progress-bar bg-success" style="width: 85%">
                  Up-to-Date (85%)
                </div>
                <div class="progress-bar bg-warning" style="width: 10%">
                  Price Changed
                </div>
                <div class="progress-bar bg-danger" style="width: 5%">
                  Out of Stock
                </div>
              </div>
              <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between">
                  <span>Total Products</span>
                  <span class="badge bg-primary"><t t-esc="sourcing.total_products"/></span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Out of Stock</span>
                  <span class="badge bg-danger"><t t-esc="sourcing.out_of_stock"/></span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Price Changed (30d)</span>
                  <span class="badge bg-warning"><t t-esc="sourcing.price_changed"/></span>
                </li>
              </ul>
              <div class="mt-3">
                <button class="btn btn-outline-primary btn-sm">Update All Products</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Store Performance -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-success text-white">
              <h5>üè™ Store Performance</h5>
            </div>
            <div class="card-body">
              <canvas id="revenueChart" width="400" height="150"></canvas>
              <ul class="list-group mt-3">
                <li class="list-group-item d-flex justify-content-between">
                  <span>Total Revenue (30d)</span>
                  <span class="badge bg-success">$<t t-esc="'{:,.0f}'.format(store.revenue)"/></span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Total Orders</span>
                  <span class="badge bg-primary"><t t-esc="store.orders"/></span>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Avg. Conversion Rate</span>
                  <span class="badge bg-info"><t t-esc="store.conversion_rate"/>%</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="row mt-4">
        <!-- Fulfillment Status -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-warning text-dark">
              <h5>üöö Fulfillment Status</h5>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-around mb-4">
                <div class="text-center">
                  <div class="display-6 text-success"><t t-esc="fulfillment.fulfilled"/></div>
                  <div class="text-muted">Shipped</div>
                </div>
                <div class="text-center">
                  <div class="display-6 text-warning"><t t-esc="fulfillment.pending"/></div>
                  <div class="text-muted">Pending</div>
                </div>
                <div class="text-center">
                  <div class="display-6 text-danger"><t t-esc="fulfillment.delayed"/></div>
                  <div class="text-muted">Delayed</div>
                </div>
              </div>
              <div class="progress mb-3" style="height: 10px;">
                <div class="progress-bar bg-success" style="width: 60%"></div>
                <div class="progress-bar bg-warning" style="width: 30%"></div>
                <div class="progress-bar bg-danger" style="width: 10%"></div>
              </div>
              <button class="btn btn-warning w-100" onclick="fetchFulfillmentQuotes()">
                Process Pending Orders
              </button>
            </div>
          </div>
        </div>

        <!-- Profit Intelligence -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header bg-info text-white">
              <h5>üí∞ Profit Intelligence</h5>
            </div>
            <div class="card-body">
              <div class="d-flex justify-content-around mb-4">
                <div class="text-center">
                  <div class="display-6 text-success">$<t t-esc="'{:,.0f}'.format(profit.total)"/></div>
                  <div class="text-muted">Total Profit</div>
                </div>
                <div class="text-center">
                  <div class="display-6 text-primary"><t t-esc="profit.margin"/>%</div>
                  <div class="text-muted">Avg. Margin</div>
                </div>
              </div>
              <canvas id="profitChart" width="400" height="150"></canvas>
              <div class="mt-3">
                <button class="btn btn-outline-info btn-sm">View Profit Report</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="row mt-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h5>‚ö° Quick Actions</h5>
            </div>
            <div class="card-body">
              <div class="d-grid gap-2 d-md-flex justify-content-md-center">
                <button class="btn btn-outline-primary">Import New Products</button>
                <button class="btn btn-outline-success">Launch New Store</button>
                <button class="btn btn-outline-warning">Process Orders</button>
                <button class="btn btn-outline-info">View Analytics</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/boss_craft_unified_dashboard/static/dashboard.js" type="text/javascript"></script>
  </t>
</template>